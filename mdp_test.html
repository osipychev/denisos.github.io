<!DOCTYPE html>
<html lang="en">

<!-- University of Illinois>
Copyright (c) 2017 University of Illinois
All rights reserved.
Developed by: 	  Denis Osipychev
                  Department of Computational Science and Engineering
                  University of Illinois at Urbana Champaign
-->
    <head>
        <meta charset="utf-8">
        <title>MDP visualization</title>
    </head>
    <body onload="main()">
        <fieldset>
            <form id="input_form">
                <legend>MDP Grid World Simulation</legend><br>
                
                <b>Grid World parameters:</b><br>
                Dimension of Grid World: 
                <input type="text" id="n_dim" value="10"><br><br>

                <b>Visualization:</b><br>
                <input type="radio" name="func" id="show_R" checked> R
                <input type="radio" name="func" id="show_V"> V
                <input type="radio" name="func" id="show_Q"> Q
                <input type="radio" name="func" id="show_Pi"> &pi; <br><br>
         
                <b>MDP parameters:</b><br>
                Number of iterations <input type="text" id="num_iter" value="1000"><br>
                Alpha<input type="text" id="alpha" value="0.9"><br>
                Gamma<input type="text" id="gamma" value="0.9"><br>
                Epsilon<input type="text" id="epsilon" value="0.5"><br><br>
            </form>
            
            <button onclick="generate()">Generate</button>
            &#8594;
            <button onclick="select_init()">Sel Loc</button>
            &#8594;
            <button onclick="select_goal()">Sel Goal</button>
            &#8594;
            <button onclick="select_obst()">Sel Obst</button>
            &#8594;
            <button onclick="singleUpdate()">Update</button>
            &#8594;
            <button onclick="sim_run()">Run</button>
            &#8594;
            <button onclick="sim_stop()">Stop</button>
        </fieldset>

        <canvas id ="example" width ="500" height ="500" style="border:5px solid #FFFFFF;">
			Please use a browser that supports "canvas"
		</canvas >
	</body>
    <script>
    eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('b a=["\\c\\Y\\l\\A\\U\\h\\c","\\M\\c\\d\\2K\\h\\c\\A\\c\\i\\d\\1M\\1i\\3u\\u","\\o\\1P\\l\\j\\h\\c\\u\\o\\d\\g\\o\\n\\c\\d\\n\\j\\c\\X\\c\\o\\d\\C\\c\\o\\2A\\o\\s\\l\\i\\X\\l\\q\\o\\2B\\o\\c\\h\\c\\A\\c\\i\\d","\\h\\g\\M","\\o\\2a\\g\\d\\o\\2A\\o\\s\\l\\i\\X\\l\\q\\o\\2B\\o\\c\\h\\c\\A\\c\\i\\d\\o","\\A\\g\\Q\\q\\c\\u\\g\\V\\i","\\M\\c\\d\\1M\\g\\Q\\i\\u\\j\\i\\M\\2G\\h\\j\\c\\i\\d\\1x\\c\\s\\d","\\s\\h\\j\\c\\i\\d\\3h","\\h\\c\\1h\\d","\\s\\h\\j\\c\\i\\d\\3j","\\d\\g\\U","\\3v\\g\\Q\\q\\c\\o\\s\\h\\j\\s\\1m\\o\\l\\d\\1F","\\l\\u\\u\\2K\\X\\c\\i\\d\\3w\\j\\q\\d\\c\\i\\c\\n","\\n\\Q\\i","\\n\\c\\l\\u\\1i","\\j\\i\\j\\d\\I\\q\\c\\h","\\M\\g\\l\\h\\I\\q\\c\\h","\\g\\1t\\q\\d\\I\\q\\c\\h","\\V\\j\\u\\d\\C","\\C\\c\\j\\M\\C\\d","\\1h\\h\\g\\g\\n","\\X\\l\\h\\Q\\c","\\i\\I\\u\\j\\A","\\c\\U\\q\\j\\h\\g\\i","\\i\\Q\\A\\I\\j\\d\\c\\n","\\n\\l\\i\\u\\g\\A","\\1t\\c\\q\\d\\o\\l\\s\\d\\j\\g\\i","\\n\\l\\i\\u\\g\\A\\o\\l\\s\\d\\j\\g\\i","\\1v\\s\\d\\j\\g\\i\\o\\d\\l\\1m\\c\\i\\1F","\\q\\h\\j\\s\\c","\\1V\\u","\\M\\c\\d\\2G\\g\\i\\d\\c\\Y\\d","\\s\\h\\c\\l\\n\\1x\\c\\s\\d","\\u\\n\\l\\V\\I\\M\\n\\j\\u","\\s\\C\\c\\s\\1m\\c\\u","\\q\\C\\g\\V\\I\\1x","\\q\\C\\g\\V\\I\\X\\l\\h\\Q\\c\\q","\\q\\C\\g\\V\\I\\3F","\\q\\C\\g\\V\\I\\2Q\\X\\l\\h\\Q\\c\\q","\\q\\C\\g\\V\\I\\1W\\j","\\q\\C\\g\\V\\I\\U\\g\\h\\j\\s\\1i","\\h\\c\\i\\M\\d\\C","\\A\\j\\i\\I\\s\\g\\n\\i\\c\\n","\\A\\l\\Y\\I\\s\\g\\n\\i\\c\\n","\\n\\c\\q\\g\\h\\Q\\d\\j\\g\\i","\\3G\\2a\\n\\j\\u\\1V\\3H\\o\\j\\i\\q\\d\\l\\i\\s\\c\\o\\s\\n\\c\\l\\d\\c\\u","\\U\\n\\g\\d\\g\\d\\1i\\U\\c","\\1t\\c\\M\\j\\i\\1W\\l\\d\\C","\\A\\g\\X\\c\\1O\\g","\\h\\j\\i\\c\\1O\\g","\\h\\j\\i\\c\\3g\\j\\u\\d\\C","\\q\\d\\n\\g\\1m\\c\\2e\\d\\1i\\h\\c","\\2J\\R\\R\\R\\R\\R\\R","\\q\\d\\n\\g\\1m\\c","\\1h\\g\\i\\d","\\3J\\R\\U\\Y\\o\\1v\\n\\j\\l\\h","\\1h\\j\\h\\h\\2e\\d\\1i\\h\\c","\\1t\\h\\l\\s\\1m","\\d\\c\\Y\\d\\1v\\h\\j\\M\\i","\\s\\c\\i\\d\\c\\n","\\d\\c\\Y\\d\\1M\\l\\q\\c\\h\\j\\i\\c","\\A\\j\\u\\u\\h\\c","\\n\\g\\Q\\i\\u","\\1h\\j\\h\\h\\1O\\c\\Y\\d","\\3D\\U\\Y\\o\\1v\\n\\j\\l\\h","\\1t\\g\\d\\d\\g\\A","\\n\\j\\M\\C\\d","\\2T","\\2R","\\2U","\\3f","\\g","\\A\\l\\Y","\\A\\j\\i","\\2Q\\o\\X\\l\\h\\Q\\c\\o\\1h\\g\\n\\o\\d\\C\\c\\o\\q\\d\\l\\d\\c\\1F","\\2J\\1P\\1P\\R\\R\\R\\R","\\1h\\j\\h\\h\\1x\\c\\s\\d","\\l\\h\\U\\C\\l","\\M\\l\\A\\A\\l"];b 1L=0;b 1n;b k;b G;b N=[2,5];b 1q=5;b L={3e:1,2Y:2,2Z:3,3a:4,3b:5};b K;b 1w=[];r 2X(){k=W[a[1]](a[0]);t(!k){Z[a[3]](a[2]);1g 2j}S{Z[a[3]](a[4])};k[a[12]](a[5],r(1U){b 1S=k[a[6]]();1w=[1U[a[7]]-1S[a[8]],1U[a[9]]-1S[a[10]]];1Z(1w);Z[a[3]](a[11],1w)},2j);2i();2o()}r 2o(){1L=0;3I(1J,H)}r 3B(){K=L[a[13]]}r 3C(){K=L[a[14]]}r 3A(){K=L[a[15]]}r 3z(){K=L[a[16]]}r 3x(){K=L[a[17]]}r 1Z(1H){b 2n=k[a[18]]/ G;b 2h=k[a[19]]/G;b 1A=E[a[20]](1H[0]/ 2n);b 1C=E[a[20]](1H[1]/2h);t(K==L[a[16]]){1d[1A][1C]+=H}S{t(K==L[a[17]]){1d[1A][1C]-=10}S{t(K==L[a[15]]){N=[1A,1C]}}}}r 2i(){G=W[a[1]](a[22])[a[21]];1n=1o 1l([-1,-1],[1,1],G);2r(G);K=L[a[14]]}r 3E(){K=L[a[13]];1J();K=L[a[14]]}r 1J(){b 1Y=W[a[1]](a[23])[a[21]];b 2m=W[a[1]](a[24])[a[21]];2p();t(1L<2m&&(K==L[a[13]])){b F;t(E[a[25]]()<1Y){F=1G(1s(N));Z[a[3]](a[26])}S{F=E[a[20]](E[a[25]]()*5);Z[a[3]](a[27])};Z[a[3]](a[28],F);b 2d=N[a[29]]();N=2H(N,F);b 2c=1d[N[0]][N[1]];2y(2d,N,F,2c)}}r 2p(){b f=k[a[31]](a[30]);f[a[32]](0,0,k[a[18]],k[a[19]]);2M(k,N,G);1n[a[33]](k);t(W[a[1]](a[35])[a[34]]){1n[a[36]](k,1d,G)}S{t(W[a[1]](a[37])[a[34]]){1n[a[38]](k,1a,G,1q)}S{t(W[a[1]](a[39])[a[34]]){1n[a[2b]](k,1a,G,1q)}}}}r 1G(O){t(O[a[1D]]===0){1g-1};b 1f=O[0];b 1K=0;J(b e=1;e<O[a[1D]];e++){t(O[e]>1f){1K=e;1f=O[e]}};1g 1K}r 2u(O){t(O[a[1D]]===0){1g-1};b 1f=O[0];J(b e=1;e<O[a[1D]];e++){t(O[e]>1f){1f=O[e]}};1g 1f}b 1l=r(2N,2O,2I){y[a[3l]]=2N;y[a[3m]]=2O;y[a[D]]=2I;Z[a[3]](a[3k])};1l[a[1z]][a[33]]=r(k){b f=k[a[31]](a[30]);2v=[0,0];1j=k[a[18]]/ y[a[D]];J(b e=0;e<= y[a[D]];e++){f[a[2t]]();f[a[2F]](e* 1j,0);f[a[2q]](e* 1j,k[a[19]]- 1);f[a[2w]]= 1;f[a[2x]]= a[2C];f[a[2D]]()};2v= [0,0];1j= k[a[19]]/y[a[D]];J(b e=0;e<=y[a[D]];e++){f[a[2t]]();f[a[2F]](0,e*1j);f[a[2q]](k[a[18]]-1,e*1j);f[a[2w]]=1;f[a[2x]]=a[2C];f[a[2D]]()}};1l[a[1z]][a[36]]=r(k,T,1R){b f=k[a[31]](a[30]);f[a[1T]]=a[2z];f[a[1y]]=a[1Q];x=k[a[18]]/ y[a[D]];w= k[a[19]]/y[a[D]];J(b e=0;e<y[a[D]];e++){J(b m=0;m<y[a[D]];m++){b z=x*e+x/2;b B=w*m+w/2;f[a[1c]]=a[1p];f[a[1e]]=a[1E];b p=T[e][m];p=E[a[1k]](p*H)/H;f[a[P]](p,z,B)}}};1l[a[1z]][a[38]]=r(k,T,1R,3i){b f=k[a[31]](a[30]);f[a[1T]]=a[3n];f[a[1y]]=a[1Q];x=k[a[18]]/ y[a[D]];w= k[a[19]]/y[a[D]];J(b e=0;e<y[a[D]];e++){J(b m=0;m<y[a[D]];m++){b z=x*e+x/2;b B=w*m;f[a[1c]]=a[1p];f[a[1e]]=a[10];b p=T[e][m][3];p=E[a[1k]](p*H)/H;f[a[P]](p,z,B);b z=x*e+x/2;b B=w*m+w;f[a[1c]]=a[1p];f[a[1e]]=a[3o];b p=T[e][m][4];p=E[a[1k]](p*H)/H;f[a[P]](p,z,B);b z=x*e;b B=w*m+w/2;f[a[1c]]=a[8];f[a[1e]]=a[1E];b p=T[e][m][1];p=E[a[1k]](p*H)/H;f[a[P]](p,z,B);b z=x*e+x;b B=w*m+w/2;f[a[1c]]=a[3t];f[a[1e]]=a[1E];b p=T[e][m][2];p=E[a[1k]](p*H)/H;f[a[P]](p,z,B);b z=x*e+x/2;b B=w*m+w/2;f[a[1c]]=a[1p];f[a[1e]]=a[10];b p=T[e][m][0];p=E[a[1k]](p*H)/H;f[a[P]](p,z,B)}}};1l[a[1z]][a[2b]]=r(k,T,1R){b f=k[a[31]](a[30]);f[a[1T]]=a[2z];f[a[1y]]=a[1Q];x=k[a[18]]/ y[a[D]];w= k[a[19]]/y[a[D]];J(b e=0;e<y[a[D]];e++){J(b m=0;m<y[a[D]];m++){b z=x*e+x/2;b B=w*m+w/2;f[a[1c]]=a[1p];f[a[1e]]=a[1E];b p=T[e][m];b 1u=1G(p);t(1u==1){f[a[P]](a[3p],z,B)}S{t(1u==2){f[a[P]](a[3q],z,B)}S{t(1u==3){f[a[P]](a[3y],z,B)}S{t(1u==4){f[a[P]](a[3r],z,B)}S{f[a[P]](a[3s],z,B)}}}}}}};b 1d=[];b 1I=[];b 1N=[];b 1a=[];r 2r(1b){J(b e=0;e<1b;++e){1d[e]=1o 1r(1b);1I[e]=1o 1r(1b);1N[e]=1o 1r(1b);1a[e]=1o 1r(1b);J(b m=0;m<1b;++m){1d[e][m]=-1.0;1I[e][m]=0;1N[e][m]=0.0;1a[e][m]=1o 1r(1q);J(b 1B=0;1B<1q;++1B){1a[e][m][1B]=0.0}}}}r 2H(v,F){t(F==0){v=v};t(F==1){v[0]=E[a[2f]](0,v[0]-1)};t(F==2){v[0]=E[a[2s]](G-1,v[0]+1)};t(F==3){v[1]=E[a[2f]](0,v[1]-1)};t(F==4){v[1]=E[a[2s]](G-1,v[1]+1)};Z[a[3]](a[2V],1s(v));1g v}r 2M(k,N){b f=k[a[31]](a[30]);x=k[a[18]]/ G;w= k[a[19]]/G;f[a[1y]]=a[3d];f[a[2S]](N[0]*x,N[1]*w,x,w)}r 2y(v,1X,F,2P){b 2k=W[a[1]](a[3c])[a[21]];b 2L=W[a[1]](a[2W])[a[21]];b 2E=1s(1X);b 2g=2u(2E);b 2l=2P+2L*2g-1s(v)[F];1a[v[0]][v[1]][F]+=2k*2l}r 1s(v){1g 1a[v[0]][v[1]]}',62,232,'||||||||||_0xa06e|var|x65|x74|_0xd2fdx27|_0xd2fdx22|x6F|x6C|x6E|x69|canvas|x61|_0xd2fdx2f|x72|x20|_0xd2fdx32|x73|function|x63|if|x64|_0xd2fdx3d|deltaY|deltaX|this|_0xd2fdx30|x6D|_0xd2fdx31|x68|44|Math|_0xd2fdx1e|n_dim|100|x5F|for|sim_state|sim_states|x67|state|_0xd2fdx24|63|x75|x30|else|_0xd2fdx2d|x70|x77|document|x76|x78|console|||||||||||qvalue|_0xd2fdx3a|58|reward|60|_0xd2fdx25|return|x66|x79|delta|62|UGrid2D|x6B|myGrid|new|59|n_actions|Array|get_qvalue|x62|_0xd2fdx34|x41|mouse_pos|x52|56|46|_0xd2fdx17|_0xd2fdx3b|_0xd2fdx18|41|61|x3A|findMaxInd|_0xd2fdx14|policy|update|_0xd2fdx26|n_iter|x42|value|x54|x46|57|_0xd2fdx2e|_0xd2fdxc|54|_0xd2fdxb|x32|x50|_0xd2fdx40|_0xd2fdx1c|selection|||||||||||x47|40|_0xd2fdx20|_0xd2fdx1f|x53|72|_0xd2fdx45|_0xd2fdx16|generate|false|_0xd2fdx42|_0xd2fdx46|_0xd2fdx1d|_0xd2fdx15|animate|draw|49|mdp_init|73|47|findMaxVal|loc|50|51|update_qvalue|55|x3C|x3E|52|53|_0xd2fdx44|48|x43|mdp_step|_0xd2fdx2c|x23|x45|_0xd2fdx43|show_state|_0xd2fdx2a|_0xd2fdx2b|_0xd2fdx41|x71|u2192|76|u2190|u2191|74|78|main|goal_sel|obst_sel|||||||||||ready|run|77|75|init_sel|u2193|x57|x58|_0xd2fdx33|x59|45|42|43|64|65|67|68|70|71|66|x49|x4D|x4C|select_obst|69|select_goal|select_init|sim_run|sim_stop|x38|singleUpdate|x51|x55|x44|setInterval|x31'.split('|'),0,{}))
                                                 
                                                   
    </script>
</html>
