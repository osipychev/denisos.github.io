<!DOCTYPE html>
<html lang="en">

<!-- University of Illinois>
Copyright (c) 2017 University of Illinois
All rights reserved.
Developed by: 	  Denis Osipychev
                  Department of Computational Science and Engineering
                  University of Illinois at Urbana Champaign
-->
    <head>
        <meta charset="utf-8">
        <title>MDP visualization</title>
    </head>
    <body onload="main()">
        <fieldset>
            <form id="input_form">
                <legend>MDP Grid World Simulation</legend><br>
                
                <b>Grid World parameters:</b><br>
                Dimension of Grid World: 
                <input type="text" id="n_dim" value="10"><br><br>

                <b>Visualization:</b><br>
                <input type="radio" name="func" id="show_R" checked> R
                <input type="radio" name="func" id="show_V"> V
                <input type="radio" name="func" id="show_Q"> Q
                <input type="radio" name="func" id="show_Pi"> &pi; <br><br>
         
                <b>MDP parameters:</b><br>
                Number of iterations <input type="text" id="num_iter" value="1000"><br>
                Alpha<input type="text" id="alpha" value="0.9"><br>
                Gamma<input type="text" id="gamma" value="0.9"><br>
                Epsilon<input type="text" id="epsilon" value="0.5"><br><br>
            </form>
            
            <button onclick="generate()">Generate</button>
            &#8594;
            <button onclick="select_init()">Sel Loc</button>
            &#8594;
            <button onclick="select_goal()">Sel Goal</button>
            &#8594;
            <button onclick="select_obst()">Sel Obst</button>
            &#8594;
            <button onclick="singleUpdate()">Update</button>
            &#8594;
            <button onclick="sim_run()">Run</button>
            &#8594;
            <button onclick="sim_stop()">Stop</button>
        </fieldset>

        <canvas id ="example" width ="500" height ="500" style="border:5px solid #FFFFFF;">
			Please use a browser that supports "canvas"
		</canvas >
	</body>
    <script>
    eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('6 1o=0;6 Q;6 8;6 m;6 p=[2,5];6 Z=5;6 s={1n:1,1r:2,1q:3,17:4,18:5};6 r;6 19=[];b 2w(){8=C.E(\'2x\');e(!8){G.H(\' 2K 2L 2J 1Q < 8 > 1N\');N 1L}z{G.H(\' 2q < 8 > 1N \')}8.2e("2b",b(1h){6 1e=8.2c();19=[1h.2o-1e.26,1h.2k-1e.1k];1O(19);G.H("2n 2m 2l:",19)},1L);1S();1K()}b 1K(){1o=0;2p(1p,10)}b 2s(){r=s.18}b 2r(){r=s.17}b 2j(){r=s.1n}b 2t(){r=s.1r}b 2h(){r=s.1q}b 1O(1j){6 a=8.A/m;6 c=8.B/m;6 1b=n.1t(1j[0]/a);6 1a=n.1t(1j[1]/c);e(r==s.1r)I[1b][1a]+=t;z e(r==s.1q)I[1b][1a]-=10;z e(r==s.1n)p=[1b,1a]}b 1S(){m=C.E("m").D;Q=S L([-1.,-1.],[1.,1.],m);1R(m);r=s.17}b 2u(){r=s.18;1p();r=s.17}b 1p(){6 1u=C.E("1u").D;6 1I=C.E("2G").D 1D();e(1o<1I&&(r==s.18)){6 h;e(n.1s()<1u){h=1y(Y(p));G.H("2E h")}z{h=n.1t(n.1s()*5);G.H("1s h")}G.H("2v 2y:",h);6 1A=p.2z();p=1M(p,h);6 1z=I[p[0]][p[1]];1B(1A,p,h,1z)}}b 1D(){6 7=8.O(\'2d\');7.2i(0,0,8.A,8.B);Q.1E(8,I,m);1J(8,p,m);Q.1T(8);e(C.E("2A").1l)Q.1Z(8,I,m);z e(C.E("2B").1l)Q.20(8,J,m,Z);z e(C.E("2C").1l)Q.23(8,J,m,Z)}b 1y(v){e(v.16===0)N-1;6 F=v[0];6 1v=0;l(6 i=1;i<v.16;i++)e(v[i]>F){1v=i;F=v[i]}N 1v}b 1F(v){e(v.16===0)N-1;6 F=v[0];l(6 i=1;i<v.16;i++)e(v[i]>F){F=v[i]}N F}6 L=b(1w,1c,d){f.1w=1w;f.1c=1c;f.d=d;G.H(\'L 2g 2D\')}L.12.1T=b(8){6 7=8.O(\'2d\');29=[0,0];R=8.A/f.d;l(6 i=0;i<=f.d;i++){7.28();7.2a(i*R,0);7.27(i*R,8.B-1);7.1Y=1;7.1X=\'#1W\';7.1V()}29=[0,0];R=8.B/f.d;l(6 i=0;i<=f.d;i++){7.28();7.2a(0,i*R);7.27(8.A-1,i*R);7.1Y=1;7.1X=\'#1W\';7.1V()}}L.12.1Z=b(8,u,15){6 7=8.O(\'2d\');7.1i="21 1g";7.X="1m";a=8.A/f.d;c=8.B/f.d;l(6 i=0;i<f.d;i++){l(6 j=0;j<f.d;j++){6 x=a*i+a/2;6 y=c*j+c/2;7.K="T";7.M="11";6 9=u[i][j];9=n.V(9*t)/t;7.w(9,x,y)}}}L.12.20=b(8,u,15,2F){6 7=8.O(\'2d\');7.1i="2H 1g";7.X="1m";a=8.A/f.d;c=8.B/f.d;l(6 i=0;i<f.d;i++){l(6 j=0;j<f.d;j++){6 x=a*i+a/2;6 y=c*j;7.K="T";7.M="1k";6 9=u[i][j][3];9=n.V(9*t)/t;7.w(9,x,y);6 x=a*i+a/2;6 y=c*j+c;7.K="T";7.M="2M";6 9=u[i][j][4];9=n.V(9*t)/t;7.w(9,x,y);6 x=a*i;6 y=c*j+c/2;7.K="26";7.M="11";6 9=u[i][j][1];9=n.V(9*t)/t;7.w(9,x,y);6 x=a*i+a;6 y=c*j+c/2;7.K="2f";7.M="11";6 9=u[i][j][2];9=n.V(9*t)/t;7.w(9,x,y);6 x=a*i+a/2;6 y=c*j+c/2;7.K="T";7.M="1k";6 9=u[i][j][0];9=n.V(9*t)/t;7.w(9,x,y)}}}L.12.23=b(8,u,15){6 7=8.O(\'2d\');7.1i="21 1g";7.X="1m";a=8.A/f.d;c=8.B/f.d;l(6 i=0;i<f.d;i++){l(6 j=0;j<f.d;j++){6 x=a*i+a/2;6 y=c*j+c/2;7.K="T";7.M="11";6 9=u[i][j];6 13=1y(9);e(13==1)7.w("←",x,y);z e(13==2)7.w("→",x,y);z e(13==3)7.w("↑",x,y);z e(13==4)7.w("↓",x,y);z 7.w("o",x,y)}}}L.12.1E=b(8,u,15){6 7=8.O(\'2d\');a=8.A/f.d;c=8.B/f.d;l(6 i=0;i<f.d;i++){l(6 j=0;j<f.d;j++){6 x=a*i+a/2;6 y=c*j+c/2;7.K="T";7.M="11";6 9=u[i][j];6 14;e(9>0)14=\'1C(\'+(U-9)+\',U,\'+(U-9)+\')\';z 14=\'1C(\'+(U+9)+\',\'+(U+9)+\',U)\';7.X=14;7.1U(i*a,j*c,a,c)}}}6 I=[];6 1x=[];6 D=[];6 J=[];b 1R(P){l(6 i=0;i<P;++i){I[i]=S W(P);1x[i]=S W(P);D[i]=S W(P);J[i]=S W(P);l(6 j=0;j<P;++j){I[i][j]=-1.0;1x[i][j]=0;D[i][j]=0.0;J[i][j]=S W(Z);l(6 k=0;k<Z;++k)J[i][j][k]=0.0}}}b 1M(g,h){e(h==0)g=g;e(h==1){g[0]=n.F(0,g[0]-1)}e(h==2){g[0]=n.1P(m-1,g[0]+1)}e(h==3){g[1]=n.F(0,g[1]-1)}e(h==4){g[1]=n.1P(m-1,g[1]+1)}G.H("q D l 1Q p:",Y(g));N g}b 1J(8,p){6 7=8.O(\'2d\');a=8.A/m;c=8.B/m;7.X="#2I";7.1U(p[0]*a,p[1]*c,a,c)}b 1B(g,1G,h,22){6 1d=C.E("1d").D;6 1f=C.E("1f").D;6 24=Y(1G);6 25=1F(24);6 1H=22+1f*25-Y(g)[h];J[g[0]][g[1]][h]+=1d*1H}b Y(g){N J[g[0]][g[1]]}',62,173,'||||||var|ctx|canvas|val|deltaX|function|deltaY|resolution|if|this|current_state|action||||for|n_dim|Math||state||sim_state|sim_states|100|matrix|arr|fillText|||else|width|height|document|value|getElementById|max|console|log|reward|qvalue|textAlign|UGrid2D|textBaseline|return|getContext|n_states|myGrid|delta|new|center|255|round|Array|fillStyle|get_qvalue|n_actions||middle|prototype|act|color|dim|length|ready|run|mouse_pos|yi|xi|max_corner|alpha|rect|gamma|Arial|evt|font|xy_pos|top|checked|black|init_sel|n_iter|update|obst_sel|goal_sel|random|floor|epsilon|maxIndex|min_corner|policy|findMaxInd|rwrd|prev_state|update_qvalue|rgb|draw|show_colors|findMaxVal|new_state|learned|max_iter|show_state|animate|false|mdp_step|element|selection|min|the|mdp_init|generate|draw_grid|fillRect|stroke|000000|strokeStyle|lineWidth|show_values|show_qvalues|10px|rew|show_policy|qnext|maxQnext|left|lineTo|beginPath|loc|moveTo|mousedown|getBoundingClientRect||addEventListener|right|instance|select_obst|clearRect|select_init|clientY|at|click|Mouse|clientX|setInterval|Got|sim_stop|sim_run|select_goal|singleUpdate|Action|main|example|taken|slice|show_R|show_Q|show_Pi|created|best|dim3|num_iter|8px|FF0000|retrieve|Failed|to|bottom'.split('|'),0,{}))                                             
    </script>
</html>
