<!DOCTYPE html>
<html lang="en">

<!-- University of Illinois>
Copyright (c) 2017 University of Illinois
All rights reserved.
Developed by: 	  Denis Osipychev
                  Department of Computational Science and Engineering
                  University of Illinois at Urbana Champaign
-->
    <head>
        <meta charset="utf-8">
        <title>MDP visualization</title>
    </head>
    <body onload="main()">
        <fieldset>
            <form id="input_form">
                <legend>MDP Grid World Simulation</legend><br>
                
                <b>Grid World parameters:</b><br>
                Dimension of Grid World: 
                <input type="text" id="n_dim" value="10"><br><br>

                <b>Visualization:</b><br>
                <input type="radio" name="func" id="show_R" checked> R
                <input type="radio" name="func" id="show_V"> V
                <input type="radio" name="func" id="show_Q"> Q
                <input type="radio" name="func" id="show_Pi"> &pi; <br><br>
         
                <b>MDP parameters:</b><br>
                Number of iterations <input type="text" id="num_iter" value="1000"><br>
                Alpha<input type="text" id="alpha" value="0.9"><br>
                Gamma<input type="text" id="gamma" value="0.9"><br>
                Epsilon<input type="text" id="epsilon" value="0.5"><br><br>
            </form>
            
            <button onclick="generate()">Generate</button>
            &#8594;
            <button onclick="select_init()">Sel Loc</button>
            &#8594;
            <button onclick="select_goal()">Sel Goal</button>
            &#8594;
            <button onclick="select_obst()">Sel Obst</button>
            &#8594;
            <button onclick="singleUpdate()">Update</button>
            &#8594;
            <button onclick="sim_run()">Run</button>
            &#8594;
            <button onclick="sim_stop()">Stop</button>
        </fieldset>

        <canvas id ="example" width ="500" height ="500" style="border:5px solid #FFFFFF;">
			Please use a browser that supports "canvas"
		</canvas >
	</body>
    <script>
	eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('b a=["\\c\\Y\\m\\D\\W\\h\\c","\\J\\c\\e\\2N\\h\\c\\D\\c\\j\\e\\1R\\1q\\3i\\y","\\q\\1L\\m\\k\\h\\c\\y\\q\\e\\g\\q\\o\\c\\e\\o\\k\\c\\X\\c\\q\\e\\C\\c\\q\\2L\\q\\u\\m\\j\\X\\m\\p\\q\\2M\\q\\c\\h\\c\\D\\c\\j\\e","\\h\\g\\J","\\q\\2z\\g\\e\\q\\2L\\q\\u\\m\\j\\X\\m\\p\\q\\2M\\q\\c\\h\\c\\D\\c\\j\\e\\q","\\D\\g\\R\\p\\c\\y\\g\\U\\j","\\J\\c\\e\\1R\\g\\R\\j\\y\\k\\j\\J\\2P\\h\\k\\c\\j\\e\\1F\\c\\u\\e","\\u\\h\\k\\c\\j\\e\\3a","\\h\\c\\1j\\e","\\u\\h\\k\\c\\j\\e\\3b","\\e\\g\\W","\\3c\\g\\R\\p\\c\\q\\u\\h\\k\\u\\1n\\q\\m\\e\\1O","\\m\\y\\y\\2N\\X\\c\\j\\e\\3k\\k\\p\\e\\c\\j\\c\\o","\\o\\R\\j","\\o\\c\\m\\y\\1q","\\k\\j\\k\\e\\G\\p\\c\\h","\\J\\g\\m\\h\\G\\p\\c\\h","\\g\\1o\\p\\e\\G\\p\\c\\h","\\U\\k\\y\\e\\C","\\C\\c\\k\\J\\C\\e","\\1j\\h\\g\\g\\o","\\X\\m\\h\\R\\c","\\j\\G\\y\\k\\D","\\c\\W\\p\\k\\h\\g\\j","\\j\\R\\D\\G\\k\\e\\c\\o","\\o\\m\\j\\y\\g\\D","\\1o\\c\\p\\e\\q\\m\\u\\e\\k\\g\\j","\\o\\m\\j\\y\\g\\D\\q\\m\\u\\e\\k\\g\\j","\\1B\\u\\e\\k\\g\\j\\q\\e\\m\\1n\\c\\j\\1O","\\p\\h\\k\\u\\c","\\1A\\y","\\J\\c\\e\\2P\\g\\j\\e\\c\\Y\\e","\\u\\h\\c\\m\\o\\1F\\c\\u\\e","\\p\\C\\g\\U\\G\\u\\g\\h\\g\\o\\p","\\y\\o\\m\\U\\G\\J\\o\\k\\y","\\u\\C\\c\\u\\1n\\c\\y","\\p\\C\\g\\U\\G\\1F","\\p\\C\\g\\U\\G\\X\\m\\h\\R\\c\\p","\\p\\C\\g\\U\\G\\3s","\\p\\C\\g\\U\\G\\2s\\X\\m\\h\\R\\c\\p","\\p\\C\\g\\U\\G\\2E\\k","\\p\\C\\g\\U\\G\\W\\g\\h\\k\\u\\1q","\\h\\c\\j\\J\\e\\C","\\D\\k\\j\\G\\u\\g\\o\\j\\c\\o","\\D\\m\\Y\\G\\u\\g\\o\\j\\c\\o","\\o\\c\\p\\g\\h\\R\\e\\k\\g\\j","\\3u\\2z\\o\\k\\y\\1A\\3p\\q\\k\\j\\p\\e\\m\\j\\u\\c\\q\\u\\o\\c\\m\\e\\c\\y","\\W\\o\\g\\e\\g\\e\\1q\\W\\c","\\1o\\c\\J\\k\\j\\2E\\m\\e\\C","\\D\\g\\X\\c\\1X\\g","\\h\\k\\j\\c\\1X\\g","\\h\\k\\j\\c\\3v\\k\\y\\e\\C","\\p\\e\\o\\g\\1n\\c\\2S\\e\\1q\\h\\c","\\2l\\S\\S\\S\\S\\S\\S","\\p\\e\\o\\g\\1n\\c","\\1j\\g\\j\\e","\\3n\\S\\W\\Y\\q\\1B\\o\\k\\m\\h","\\1j\\k\\h\\h\\2S\\e\\1q\\h\\c","\\1o\\h\\m\\u\\1n","\\e\\c\\Y\\e\\1B\\h\\k\\J\\j","\\u\\c\\j\\e\\c\\o","\\e\\c\\Y\\e\\1R\\m\\p\\c\\h\\k\\j\\c","\\D\\k\\y\\y\\h\\c","\\o\\g\\R\\j\\y","\\1j\\k\\h\\h\\1X\\c\\Y\\e","\\3e\\W\\Y\\q\\1B\\o\\k\\m\\h","\\1o\\g\\e\\e\\g\\D","\\o\\k\\J\\C\\e","\\2Z","\\2Y","\\3j","\\3r","\\g","\\o\\J\\1o\\3q","\\1D\\1A\\1E\\1E\\1D","\\2c","\\1D","\\1D\\1A\\1E\\1E\\2c","\\1j\\k\\h\\h\\1F\\c\\u\\e","\\D\\m\\Y","\\D\\k\\j","\\2s\\q\\X\\m\\h\\R\\c\\q\\1j\\g\\o\\q\\e\\C\\c\\q\\p\\e\\m\\e\\c\\1O","\\2l\\1L\\1L\\S\\S\\S\\S","\\m\\h\\W\\C\\m","\\J\\m\\D\\D\\m"];b 1Q=0;b 1g;b i;b H;b N=[2,5];b 1w=5;b L={3h:1,3g:2,3f:3,3d:4,3H:5};b K;b 1z=[];r 3O(){i=V[a[1]](a[0]);w(!i){1b[a[3]](a[2]);1f 2p}T{1b[a[3]](a[4])};i[a[12]](a[5],r(1Y){b 1W=i[a[6]]();1z=[1Y[a[7]]-1W[a[8]],1Y[a[9]]-1W[a[10]]];2q(1z);1b[a[3]](a[11],1z)},2p);2t();2n()}r 2n(){1Q=0;3Q(1M,10)}r 3U(){K=L[a[13]]}r 3w(){K=L[a[14]]}r 3R(){K=L[a[15]]}r 3J(){K=L[a[16]]}r 3I(){K=L[a[17]]}r 2q(1P){b 2r=i[a[18]]/ H;b 2j=i[a[19]]/H;b 1C=F[a[20]](1P[0]/ 2r);b 1y=F[a[20]](1P[1]/2j);w(K==L[a[16]]){Z[1C][1y]+=M}T{w(K==L[a[17]]){Z[1C][1y]-=10}T{w(K==L[a[15]]){N=[1C,1y]}}}}r 2t(){H=V[a[1]](a[22])[a[21]];1g=1p 1e([-1,-1],[1,1],H);2o(H);K=L[a[14]]}r 3V(){K=L[a[13]];1M();K=L[a[14]]}r 1M(){b 2g=V[a[1]](a[23])[a[21]];b 2b=V[a[1]](a[24])[a[21]];2w();w(1Q<2b&&(K==L[a[13]])){b I;w(F[a[25]]()<2g){I=1S(1u(N));1b[a[3]](a[26])}T{I=F[a[20]](F[a[25]]()*5);1b[a[3]](a[27])};1b[a[3]](a[28],I);b 2y=N[a[29]]();N=2m(N,I);b 2a=Z[N[0]][N[1]];2e(2y,N,I,2a)}}r 2w(){b f=i[a[31]](a[30]);f[a[32]](0,0,i[a[18]],i[a[19]]);1g[a[33]](i,Z,H);2u(i,N,H);1g[a[34]](i);w(V[a[1]](a[36])[a[35]]){1g[a[37]](i,Z,H)}T{w(V[a[1]](a[38])[a[35]]){1g[a[39]](i,1a,H,1w)}T{w(V[a[1]](a[3C])[a[35]]){1g[a[2J]](i,1a,H,1w)}}}}r 1S(P){w(P[a[1G]]===0){1f-1};b 1h=P[0];b 1N=0;E(b d=1;d<P[a[1G]];d++){w(P[d]>1h){1N=d;1h=P[d]}};1f 1N}r 2f(P){w(P[a[1G]]===0){1f-1};b 1h=P[0];E(b d=1;d<P[a[1G]];d++){w(P[d]>1h){1h=P[d]}};1f 1h}b 1e=r(2V,2X,2Q){v[a[3y]]=2V;v[a[3D]]=2X;v[a[x]]=2Q;1b[a[3]](a[3E])};1e[a[1t]][a[34]]=r(i){b f=i[a[31]](a[30]);2F=[0,0];1l=i[a[18]]/ v[a[x]];E(b d=0;d<= v[a[x]];d++){f[a[2G]]();f[a[2R]](d* 1l,0);f[a[2C]](d* 1l,i[a[19]]- 1);f[a[2A]]= 1;f[a[2B]]= a[2H];f[a[2I]]()};2F= [0,0];1l= i[a[19]]/v[a[x]];E(b d=0;d<=v[a[x]];d++){f[a[2G]]();f[a[2R]](0,d*1l);f[a[2C]](i[a[18]]-1,d*1l);f[a[2A]]=1;f[a[2B]]=a[2H];f[a[2I]]()}};1e[a[1t]][a[37]]=r(i,O,1K){b f=i[a[31]](a[30]);f[a[1V]]=a[2K];f[a[1v]]=a[1U];s=i[a[18]]/ v[a[x]];t= i[a[19]]/v[a[x]];E(b d=0;d<v[a[x]];d++){E(b l=0;l<v[a[x]];l++){b B=s*d+s/2;b A=t*l+t/2;f[a[1c]]=a[1k];f[a[1d]]=a[1x];b n=O[d][l];n=F[a[1m]](n*M)/M;f[a[Q]](n,B,A)}}};1e[a[1t]][a[39]]=r(i,O,1K,3x){b f=i[a[31]](a[30]);f[a[1V]]=a[3z];f[a[1v]]=a[1U];s=i[a[18]]/ v[a[x]];t= i[a[19]]/v[a[x]];E(b d=0;d<v[a[x]];d++){E(b l=0;l<v[a[x]];l++){b B=s*d+s/2;b A=t*l;f[a[1c]]=a[1k];f[a[1d]]=a[10];b n=O[d][l][3];n=F[a[1m]](n*M)/M;f[a[Q]](n,B,A);b B=s*d+s/2;b A=t*l+t;f[a[1c]]=a[1k];f[a[1d]]=a[3A];b n=O[d][l][4];n=F[a[1m]](n*M)/M;f[a[Q]](n,B,A);b B=s*d;b A=t*l+t/2;f[a[1c]]=a[8];f[a[1d]]=a[1x];b n=O[d][l][1];n=F[a[1m]](n*M)/M;f[a[Q]](n,B,A);b B=s*d+s;b A=t*l+t/2;f[a[1c]]=a[3T];f[a[1d]]=a[1x];b n=O[d][l][2];n=F[a[1m]](n*M)/M;f[a[Q]](n,B,A);b B=s*d+s/2;b A=t*l+t/2;f[a[1c]]=a[1k];f[a[1d]]=a[10];b n=O[d][l][0];n=F[a[1m]](n*M)/M;f[a[Q]](n,B,A)}}};1e[a[1t]][a[2J]]=r(i,O,1K){b f=i[a[31]](a[30]);f[a[1V]]=a[2K];f[a[1v]]=a[1U];s=i[a[18]]/ v[a[x]];t= i[a[19]]/v[a[x]];E(b d=0;d<v[a[x]];d++){E(b l=0;l<v[a[x]];l++){b B=s*d+s/2;b A=t*l+t/2;f[a[1c]]=a[1k];f[a[1d]]=a[1x];b n=O[d][l];b 1s=1S(n);w(1s==1){f[a[Q]](a[3M],B,A)}T{w(1s==2){f[a[Q]](a[3N],B,A)}T{w(1s==3){f[a[Q]](a[3S],B,A)}T{w(1s==4){f[a[Q]](a[3K],B,A)}T{f[a[Q]](a[3L],B,A)}}}}}}};1e[a[1t]][a[33]]=r(i,O,1K){b f=i[a[31]](a[30]);s=i[a[18]]/ v[a[x]];t= i[a[19]]/v[a[x]];E(b d=0;d<v[a[x]];d++){E(b l=0;l<v[a[x]];l++){b B=s*d+s/2;b A=t*l+t/2;f[a[1c]]=a[1k];f[a[1d]]=a[1x];b n=O[d][l];b 1I;w(n>0){1I=a[2i]+(1J-n)+a[3B]+(1J-n)+a[3G]}T{1I=a[2i]+(1J+n)+a[3P]+(1J+n)+a[3F]};f[a[1v]]=1I;f[a[2x]](d*s,l*t,s,t)}}};b Z=[];b 1T=[];b 1Z=[];b 1a=[];r 2o(1i){E(b d=0;d<1i;++d){Z[d]=1p 1r(1i);1T[d]=1p 1r(1i);1Z[d]=1p 1r(1i);1a[d]=1p 1r(1i);E(b l=0;l<1i;++l){Z[d][l]=-1.0;1T[d][l]=0;1Z[d][l]=0.0;1a[d][l]=1p 1r(1w);E(b 1H=0;1H<1w;++1H){1a[d][l][1H]=0.0}}}}r 2m(z,I){w(I==0){z=z};w(I==1){z[0]=F[a[2k]](0,z[0]-1)};w(I==2){z[0]=F[a[2v]](H-1,z[0]+1)};w(I==3){z[1]=F[a[2k]](0,z[1]-1)};w(I==4){z[1]=F[a[2v]](H-1,z[1]+1)};1b[a[3]](a[3o],1u(z));1f z}r 2u(i,N){b f=i[a[31]](a[30]);s=i[a[18]]/ H;t= i[a[19]]/H;f[a[1v]]=a[3l];f[a[2x]](N[0]*s,N[1]*t,s,t)}r 2e(z,2d,I,2D){b 2T=V[a[1]](a[3t])[a[21]];b 2W=V[a[1]](a[3m])[a[21]];b 2h=1u(2d);b 2U=2f(2h);b 2O=2D+2W*2U-1u(z)[I];1a[z[0]][z[1]][I]+=2T*2O}r 1u(z){1f 1a[z[0]][z[1]]}',62,244,'||||||||||_0xa4ef|var|x65|_0x6aedx27|x74|_0x6aedx22|x6F|x6C|canvas|x6E|x69|_0x6aedx2f|x61|_0x6aedx32|x72|x73|x20|function|deltaX|deltaY|x63|this|if|45|x64|_0x6aedx3e|_0x6aedx31|_0x6aedx30|x68|x6D|for|Math|x5F|n_dim|_0x6aedx1e|x67|sim_state|sim_states|100|state|_0x6aedx2d|_0x6aedx24|64|x75|x30|else|x77|document|x70|x76|x78|reward|||||||||||qvalue|console|59|61|UGrid2D|return|myGrid|_0x6aedx25|_0x6aedx3b|x66|60|delta|63|x6B|x62|new|x79|Array|_0x6aedx34|47|get_qvalue|57|n_actions|62|_0x6aedx18|mouse_pos|x32|x41|_0x6aedx17|x2C|x35|x52|42|_0x6aedx3c|_0x6aedx35|255|_0x6aedx2e|x46|update|_0x6aedx26|x3A|_0x6aedx14|n_iter|x42|findMaxInd|policy|58|55|_0x6aedxc|x54|_0x6aedxb|value|||||||||||_0x6aedx20|_0x6aedx1d|x29|_0x6aedx41|update_qvalue|findMaxVal|_0x6aedx1c|_0x6aedx45|73|_0x6aedx16|79|x23|mdp_step|animate|mdp_init|false|selection|_0x6aedx15|x71|generate|show_state|80|draw|78|_0x6aedx1f|x47|51|52|50|_0x6aedx42|x50|loc|48|53|54|41|56|x3C|x3E|x45|_0x6aedx47|x43|_0x6aedx2c|49|x53|_0x6aedx43|_0x6aedx46|_0x6aedx2a|_0x6aedx44|_0x6aedx2b|u2192|u2190|||||||||||x58|x59|x4D|ready|x38|obst_sel|goal_sel|init_sel|x49|u2191|x4C|82|84|x31|81|x44|x28|u2193|x51|83|x55|x57|sim_stop|_0x6aedx33|43|65|66|74|40|44|46|77|75|run|select_obst|select_goal|71|72|68|69|main|76|setInterval|select_init|70|67|sim_run|singleUpdate'.split('|'),0,{}))    	
    </script>
</html>
